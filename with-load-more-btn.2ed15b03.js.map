{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,0BAKA,MACMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAcH,SAASC,cAAc,kBAE3CE,EAAYC,MAAMC,QAAU,OAE5B,IAAIC,EAAc,GACdC,EAAO,EA0CXC,eAAeC,EAAUC,EAAMC,GAC7B,MAAMC,EAAe,IAAIC,gBAAgB,CACvCC,IApDY,qCAqDZC,EAAGJ,EACHK,KAAMN,EACNO,SA9CY,GA+CZC,WAAY,QACZC,YAAa,aACbC,YAAY,IAGd,aAAa,EAAAvB,EAAAwB,SAAM,IAAIT,I,CAGzB,SAASU,EAAaC,GACpB,MAAMC,EAASD,EAAKE,KACjBC,KACCC,GACE,gDACqCA,EAAKC,mGAEHD,EAAKE,sBAAsBF,EAAKG,qHAGrDH,EAAKI,2FAGLJ,EAAKK,8FAGFL,EAAKM,kGAGJN,EAAKO,8FAO9BC,KAAK,IAERjC,EAAQkC,mBAAmB,YAAaZ,GACxCa,EAAeC,S,CAlFjBvC,EAAKwC,iBAAiB,UAGtB/B,eAAwBgC,GACtBA,EAAIC,iBACJlC,EAAO,EACPL,EAAQwC,UAAY,GAEpBpC,EAAcP,EAAK4C,SAASC,YAAYC,MAAMC,OAE9C,MAAMvB,KAAEA,SAAed,EAAUF,EAAMD,GAGd,IAArBiB,EAAKE,KAAKsB,SACZ5C,EAAYC,MAAMC,QAAU,OAC5B2C,EAAAC,OAAOC,QACL,6EAIJ5B,EAAaC,GAETA,EAAKE,KAAKsB,OAAS,GACrBC,EAAAC,OAAOE,QAAQ,oBAAoB5B,EAAK6B,uBAGtC7B,EAAKE,KAAKsB,OA5BA,IA4BoBxB,EAAKE,KAAKsB,OAAS,IACnD5C,EAAYC,MAAMC,QAAU,OAE5B2C,EAAAC,OAAOI,KAAK,+DA/BA,KAkCV9B,EAAKE,KAAKsB,SACZ5C,EAAYC,MAAMC,QAAU,Q,IAhChCF,EAAYoC,iBAAiB,SA0F7B/B,iBACED,GAAQ,EACR,MAAMgB,KAAEA,SAAed,EAAUF,EAAMD,GACvCgB,EAAaC,GAETA,EAAKE,KAAKsB,OAlGA,IAkGoBxB,EAAKE,KAAKsB,OAAS,IACnD5C,EAAYC,MAAMC,QAAU,OAE5B2C,EAAAC,OAAOI,KAAK,8D,IA9DhBxD,EAAAwB,QAAMiC,SAASC,QAAU,2BAgDzB,MAAMlB,EAAiB,IAAImB,EAAAC,GAAJ,CAAmB,aAAc,CACtDC,aAAc,MACdC,aAAc,IACdC,gBAAiB","sources":["src/load-more-btn.js"],"sourcesContent":["import axios from 'axios';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_KEY = '39207627-8a410277f132e49ffdfa9ce97';\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nloadMoreBtn.style.display = 'none';\n\nlet searchQuery = '';\nlet page = 1;\nconst perPage = 40;\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onClickMore);\n\nasync function onSubmit(evt) {\n  evt.preventDefault();\n  page = 1;\n  gallery.innerHTML = '';\n\n  searchQuery = form.elements.searchQuery.value.trim();\n\n  const { data } = await fetchData(page, searchQuery);\n  // console.log(data);\n\n  if (data.hits.length === 0) {\n    loadMoreBtn.style.display = 'none';\n    Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  }\n\n  createMarkup(data);\n\n  if (data.hits.length > 1) {\n    Notify.success(`Hooray! We found ${data.totalHits} images ðŸ˜Ž`);\n  }\n\n  if (data.hits.length < perPage && data.hits.length > 0) {\n    loadMoreBtn.style.display = 'none';\n\n    Notify.info(\"We're sorry, but you've reached the end of search results.\");\n  }\n\n  if (data.hits.length === perPage) {\n    loadMoreBtn.style.display = 'block';\n  }\n}\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nasync function fetchData(page, searchQuery) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchQuery,\n    page: page,\n    per_page: perPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return await axios(`?${searchParams}`);\n}\n\nfunction createMarkup(data) {\n  const markup = data.hits\n    .map(\n      elem =>\n        `\n        <a class=\"gallery-link link\" href=\"${elem.largeImageURL}\">\n        <div class=\"photo-card\">\n          <img width=\"400\" height=\"300\" src=\"${elem.webformatURL}\" alt=\"${elem.tags}\" loading=\"lazy\" />\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes: ${elem.likes}</b>\n            </p>\n            <p class=\"info-item\">\n              <b>Views: ${elem.views}</b>\n            </p>\n            <p class=\"info-item\">\n              <b>Comments: ${elem.comments}</b>\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads: ${elem.downloads}</b>\n            </p>\n          </div>\n        </div>\n        </a>\n        `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  simpleLightBox.refresh();\n}\n\nconst simpleLightBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom',\n});\n\nasync function onClickMore() {\n  page += 1;\n  const { data } = await fetchData(page, searchQuery);\n  createMarkup(data);\n\n  if (data.hits.length < perPage && data.hits.length > 0) {\n    loadMoreBtn.style.display = 'none';\n\n    Notify.info(\"We're sorry, but you've reached the end of search results.\");\n  }\n}\n"],"names":["$2shzp","parcelRequire","$b27c7bb6cfaaa01e$var$form","document","querySelector","$b27c7bb6cfaaa01e$var$gallery","$b27c7bb6cfaaa01e$var$loadMoreBtn","style","display","$b27c7bb6cfaaa01e$var$searchQuery","$b27c7bb6cfaaa01e$var$page","async","$b27c7bb6cfaaa01e$var$fetchData","page1","searchQuery1","searchParams","URLSearchParams","key","q","page","per_page","image_type","orientation","safesearch","default","$b27c7bb6cfaaa01e$var$createMarkup","data","markup","hits","map","elem","largeImageURL","webformatURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","$b27c7bb6cfaaa01e$var$simpleLightBox","refresh","addEventListener","evt","preventDefault","innerHTML","elements","searchQuery","value","trim","length","$iQIUW","Notify","failure","success","totalHits","info","defaults","baseURL","$parcel$interopDefault","$fZKcF","captionsData","captionDelay","captionPosition"],"version":3,"file":"with-load-more-btn.2ed15b03.js.map"}